=== Сервисы =====================================
//Укрупненно (без разделение на UI и бизнес логику)

ates_auth - сервис аутентификации (по клюву), при успешной аутентификации отдает токен, по которому можно ходить в другие сервисы. 
	Инфо потоки:
		Обслуживает запросы:
		- аутентификация пользователей
		- проверка валидности токена

ates_user_service - управление пользователями, создание, блокировка, назначение полномиочий и т.д., отдает список прав пользователей для авторизации доступа. 

	Инфо потоки:
	Обслуживает запросы:
	- получение атрибутов пользователя
	- получение полномочий пользователя
	Генерит события:
	- блокировка пользователя
	- изменения атрибутов пользователя
	- изменени отзыв полномочий пользователя
	Слушает события:
	- входы/выходы пользователей в различные подсистемы (аудит)

ates_task_service - CRUD для тасков, назначение тасков, другое управление тасками

	Инфо потоки:
	Обслуживает запросы:
	- Трафик от пользователей (UI)
	Генерит запросы:
	- к ates_auth для проверки токена 
	- к ates_user_service для получения прав пользователей
	Генерит события:
	- События изменения исполнителя тасков
	- Событие изменения статуса таска (создание, закрытие и т.д.)
	Слушает события:
	- изменения по пользователям от ates_user_service (например чтобы прекратить предоставлять доступ для заблокированного пользователя)
	- результат рассчета стоимости таска от ates_accounting_service

ates_accounting_service - сервис закрывает операционный день, генерит проводки, обновляет балансы, готовит фин. отчеты за день, считает стоимость таска

	Инфо потоки:
	Обслуживает запросы:
	- Трафик от пользователей (UI)
	Генерит запросы:
	- к ates_auth для проверки токена 
	- к ates_user_service для получения прав пользователей
	Слушает события:
	- События от ates_user_service, если завели пользователя, то ему нужно открыть счет, если заблокировали пользователя, ему нужно закрыть счет.
	- События изменений по таскам от ates_task_service, для новой задачи нужно рассчитать стоимость, для назначаенной таски списать средства, для выполненной таски - зачислить
	Генерит события:
	- события по всем движениям по счетам
	- событие закрытия опер дня

ates_analytic_service - сервис для рассчета аналитических показателей
	Инфо потоки:
	Обслуживает запросы:
	- Трафик от пользователей (UI)
	Генерит запросы:
	- к ates_auth для проверки токена 
	- к ates_user_service для получения прав пользователей	
	Слушает события:
	- варианты: можно делать либо на CUD событиях, чтобы получить реплику всех данных, либо если анализировать бизнес события то см. раздел по бизнес событиям	
	Генерит события:
	- нет таких
	
=== Взаимодействие ==============================
Там где указаны запросы - синхрон, там где указаны события - асинхрон


=== Бизнес события: =============================
* Регистрация нового пользователя					Producer: ates_user_service			Consumer: ates_task_service, ates_accounting_service, ates_analytic_service
* Блокировка пользователя							Producer: ates_user_service			Consumer: ates_task_service, ates_accounting_service, ates_analytic_service
* Смена роли пользователя (изменение полномочий)	Producer: ates_user_service			Consumer: ates_task_service, ates_accounting_service, ates_analytic_service
* Создание таска									Producer: ates_task_service			Consumer: ates_accounting_service, ates_analytic_service
* Закрытие таска									Producer: ates_task_service			Consumer: ates_accounting_service, ates_analytic_service
* Назначение таска									Producer: ates_task_service			Consumer: ates_accounting_service, ates_analytic_service
* Рассчет стоимости таска							Producer: ates_accounting_service	Consumer: ates_task_service, ates_analytic_service									
* Списание со счета при назначении таска			Producer: ates_accounting_service	Consumer: ??? пока никому не надо
* Зачисление на счет при закрытии таска				Producer: ates_accounting_service	Consumer: ??? пока никому не надо
* Закрытие бизнес дня								Producer: ates_accounting_service	Consumer: ates_analytic_service
* Выплата со счета по итогу бизнес дня 				Producer: ates_accounting_service	Consumer: ates_analytic_service 

=== CUD события: =================================
* Изменения атрибутов пользователя
* Изменения атрибутов таска
* Изменения атрибутов счета  


